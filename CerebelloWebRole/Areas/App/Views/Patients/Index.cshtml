@model CerebelloWebRole.Areas.App.Models.PatientsIndexViewModel
@{
    ViewBag.Title = "Prontuário · Cerebello";

    ViewBag.Watermark = "Pesquisar pelo nome do paciente";

    var localNow = (DateTime)this.ViewBag.LocalNow;

    var grid = this.Html.CreateGrid(this.Model.LastRegisteredPatients, CerebelloWebRole.Code.Constants.GRID_PAGE_SIZE);
    grid.AddField(m => m.FullName, format: @<text><a href="@Url.Action("details", new { id = @item.Id })">@item.FullName</a></text>);
    grid.AddField(m => m.DateOfBirth, format: @<text>@CerebelloWebRole.Code.DateTimeHelper.GetPersonAgeInWords(@item.DateOfBirth, localNow, true)</text>, header: "Idade");
}
@section Title {
Prontuário
}
@section Styles {
    <link type="text/css" rel="Stylesheet" href="/content/styles/app/jquery.jqplot.min.css" />
}
@section SideBar {
    <ul>
        <li><a href="@Url.Action("create", "patients")" class="icon-link icon-link-plus">Novo
            paciente</a></li>
    </ul>
}
@using (Html.BeginForm("search", null, FormMethod.Get))
{
    @Html.Partial("SearchBox", new CerebelloWebRole.Areas.App.Models.SearchModel())
}
<div class="patients-summary">
    <table>
        <tr>
            <td class="header">
                Total de pacientes:
            </td>
            <td class="value">@Model.TotalPatientsCount
            </td>
        </tr>
    </table>
</div>
<div style="clear: both">
</div>
<div class="patients-graphs">
    <div id="placeholder" style="height: 50px; width: 200px;">
    </div>
</div>
<div class="widget">
    <h2>
        Últimos pacientes cadastrados
    </h2>
    @grid.GetHtml()
</div>
