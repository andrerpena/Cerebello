@model ReceiptMedicineViewModel
@using System.Linq.Expressions
@using CerebelloWebRole.Code.Controls
@{
    Layout = null;
    var editPanel = Html.CreateEditPanel();
    editPanel.AddField(
        m => m.MedicineId,
        EditPanelFieldSize.Large,
        format: @<text>@(Html.AutocompleteGridFor(
            m => m.MedicineId,
            m => m.MedicineText,
            Url.Action("lookupmedication", "medicines"),
            gm => gm.Id,
            gm => gm.Name,
            new Expression<Func<MedicineLookupGridModel, object>>[] { gm => gm.LaboratoryName },
            this.Url.Action("Create", "Medicines"),
            "Novo medicamento",
            500,
            100
        ))</text>);
    editPanel.AddField(m => m.Quantity, EditPanelFieldSize.Large);
    editPanel.AddField(m => m.Prescription, CerebelloWebRole.Code.Controls.EditPanelFieldSize.Large, format: @<text>@Html.TextAreaFor(model => model.Prescription)</text>);
    editPanel.AddField(m => m.Observations, CerebelloWebRole.Code.Controls.EditPanelFieldSize.Large, format: @<text>@Html.TextAreaFor(model => model.Observations)</text>);
}

@using (Html.BeginCollectionItem("ReceiptMedicines"))
{
    @Html.HiddenFor(model => model.Id);
    <div class="edit-list-item-wrapper">
        @editPanel.GetHtml()
    </div>
    <div style="clear: both">
    </div>
}
