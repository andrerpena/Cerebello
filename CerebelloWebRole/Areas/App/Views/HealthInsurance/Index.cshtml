@model HealthInsuranceIndexViewModel
@using CerebelloWebRole.Areas.App.Models
@using CerebelloWebRole.Code
@{
    var title =
        this.ViewBag.IsFiltered == true
            ? "Busca por convênios médicos"
            : "Convênios médicos";

    this.ViewBag.Title = string.Format("{0} · Cerebello", title);
    this.ViewBag.Watermark = "Pesquisar pelo nome do convênio";

    var grid = this.Html.CreateGrid(this.Model.Objects, Constants.GRID_PAGE_SIZE);
    grid.AddLinkField(item => item.Name, "Details", item => new { id = item.Id });
    grid.AddField(item => item.IsActive, m => m.IsActive ? "Ativo" : "Inativo", "");
    grid.AddField(item => item.NewAppointmentValue);
    grid.AddField(item => item.ReturnDaysInterval);
}
@section Title {
    @title
}
@section SideBar {
    <ul>
        <li><a href="@Url.Action("Create")" class="icon-link icon-link-plus">Novo convênio</a> </li>
    </ul>
}

@using (Html.BeginForm("search", null, FormMethod.Get))
{
    @Html.Partial("SearchBox", new SearchModel())
}

<div class="widget">
    <h2>Últimos convênios cadastrados
    </h2>
    @grid.GetHtml()
</div>
